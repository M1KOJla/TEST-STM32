#include "led_proc.h"
#include "led_periph.h"                 

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------

void led_init(void) 
{
  LED_PORT_init();
  LED_TIM_init ();
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------

void TIM3_IRQHandler (void)							//обработчик прерывания от TIM3
{
    CLEAR_BIT(TIM3->SR, TIM_SR_UIF);			                        //сброс флага таймера TIM3
    LED_blink ();	
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------

void LED_blink (void)
{
      if (read_LED_state ())					                
      {										
        LED_off ();					
      }
      else
      {																
        LED_on ();					
      }
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
 
extern uint8_t button_state;

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------

void LED_blink_on_off (uint8_t button_state)
{
    if (button_state)
    {
      blinc_start ();
    }
    else
    {
      blinc_stop ();
      LED_off ();
    }
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------